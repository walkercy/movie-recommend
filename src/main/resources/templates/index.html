<!DOCTYPE html>
<html lang="en">
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- 新 Bootstrap4 核心 CSS 文件 -->
    <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/4.0.0-beta/css/bootstrap.min.css">
    <!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
    <script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
    <!-- popper.min.js 用于弹窗、提示、下拉菜单 -->
    <script src="https://cdn.bootcss.com/popper.js/1.12.5/umd/popper.min.js"></script>
    <!-- 最新的 Bootstrap4 核心 JavaScript 文件 -->
    <script src="https://cdn.bootcss.com/bootstrap/4.0.0-beta/js/bootstrap.min.js"></script>
    <title>页面调试</title>

    <style>
        .carousel-inner img {
            width: 100%;
            height: 100%;
        }
        a { color:red; transition:0.5s; }
        a:hover {
            color:orange;
            text-decoration:none;
        }
        .caption {margin-top: 10px; margin-left: 15px;}
        .cover {height: 225px;}
        .movie {padding: 0;}
    </style>
</head>
<body>

<div th:replace="header :: header"></div>
<div th:replace="header :: modal"></div>

<div id="demo" class="carousel slide" data-ride="carousel" style="padding-top: 65px">

    <!-- 指示符 -->
    <ul class="carousel-indicators">
        <li data-target="#demo" data-slide-to="0" class="active"></li>
        <li data-target="#demo" data-slide-to="1"></li>
        <li data-target="#demo" data-slide-to="2"></li>
    </ul>

    <!-- 轮播图片 -->
    <div class="carousel-inner">
        <div class="carousel-item active">
            <img src="/images/index1.jpg">
        </div>
        <div class="carousel-item">
            <img src="http://image14.m1905.cn/uploadfile/2018/0410/20180410094202157349.jpg">
        </div>
        <div class="carousel-item">
            <img src="http://image11.m1905.cn/uploadfile/2018/0322/20180322092343811155.jpg">
        </div>
    </div>

    <!-- 左右切换按钮 -->
    <a class="carousel-control-prev" href="#demo" data-slide="prev">
        <span class="carousel-control-prev-icon"></span>
    </a>
    <a class="carousel-control-next" href="#demo" data-slide="next">
        <span class="carousel-control-next-icon"></span>
    </a>
</div>

<div style="margin-top: 30px">
    <div class="container">
        <a href="/lay"><h3 style="color: #000;">即将上映</h3><hr></a>
    </div>
</div>

<div class="container">
    <div class = "row" id="comming">
        <div class="col-md-2 movie" th:each="comming : ${commings}">
            <a th:value="${comming.id}">
                <img class="col-md-12 cover" th:src="${comming.img}" alt="通用的占位符缩略图">
            </a>
            <div class="caption">
                <h7 th:text="${comming.name}"></h7><br>
                <span>评分：</span>
                <h7 th:if="${comming.average gt 0.0}" th:text="${comming.average}"></h7>
                <h7 th:if="${comming.average eq 0.0}">暂无评分</h7>
            </div>
        </div>
    </div>
</div>

<div style="margin-top: 30px">
    <div class="container">
        <a href="/lay"><h3 style="color: #000;">最受欢迎</h3><hr></a>
    </div>
</div>

<div class="container">
    <div class = "row">
        <div class="col-md-2 movie" th:each="threater : ${threaters}">
            <img class="col-md-12 cover" th:src="${threater.img}" alt="通用的占位符缩略图">
            <div class="caption">
                <h7 th:text="${threater.name}"></h7><br>
                <span>评分：</span><h7 th:text="${threater.average}"></h7>
            </div>
        </div>
    </div>
</div>

<div style="margin-top: 30px">
    <div class="container">
        <a href="/lay"><h3 style="color: #000;">为您推荐</h3><hr></a>
    </div>
</div>

<div class="container">
    <div class = "row">
        <div class="col-md-2 movie" th:each="i:${#numbers.sequence(0,5)}">
            <img class="col-md-12 cover" src="https://img3.doubanio.com/view/photo/s_ratio_poster/public/p2517753454.jpg"
                 alt="通用的占位符缩略图">
            <div class="caption">
                <h6><span>缩略图标签</span></h6>
                <h6>评分：</h6>
            </div>
        </div>
    </div><br><hr><br>
</div>
</body>
</html>

<script type="text/javascript">
    $('#signin').click(function () {
        var data = {
            "username" : $('#inputEmail').val(),
            "password" : $('#inputPassword').val()
        }
        console.log(data)
        $.ajax({
            url : "/api/user/sign_up",
            type : "post",
            data : data,
            success : function (res) {
                if (res.code == 200) {
                    alert("注册成功")
                    window.location.href("/index")
                } else {
                    alert("注册失败")
                }
            }
        })
    })

    $('#login').click(function () {
        var data = {
            "username" : $('#inputEmail').val(),
            "password" : $('#inputPassword').val()
        }
        console.log(data)
        $.ajax({
            url : "/api/user/login",
            type : "post",
            data : data,
            success : function (res) {

            }
        })
    })

    $('#comming').find('a').click(function () {

    })
</script>